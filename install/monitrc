###############################################################################
## Monit control file
###############################################################################
set daemon 120            # check services at 2-minute intervals
 with start delay 3600    # 30min
   
set logfile /var/log/monit.log

set idfile /var/lib/monit/id

set statefile /var/lib/monit/state

set mailserver smtp.gmail.com port 587
    username "thomas.indenodes@gmail.com" password ""
    using TLSV1 with timeout 30 seconds
    
set eventqueue
    basedir /var/lib/monit/events # set the base directory where events will be stored
    slots 100                     # optionally limit the queue size


set alert thomas.lagane@gmail.com not on { instance, action }

set httpd port 2812 and use address localhost allow localhost

###############################################################################
## Services
###############################################################################

check system $HOST
  if loadavg (1min) > 8 then alert
  if loadavg (5min) > 4 then alert
  if cpu usage > 95% for 10 cycles then alert
  if memory usage > 75% then alert
  if swap usage > 25% then alert

CHECK PROCESS komodod MATCHING "komodod -gen -genproclimit=1"
  if not exist then alert
CHECK PROCESS VRSC MATCHING "-ac_name=VRSC"
  if not exist then alert
CHECK PROCESS hushd MATCHING "hushd"
  if not exist then alert
CHECK PROCESS einsteiniumd MATCHING "einsteiniumd"
  if not exist then alert
CHECK PROCESS bitcoind MATCHING "bitcoind"
  if not exist then alert
CHECK PROCESS gincoind MATCHING "gincoind"
  if not exist then alert
CHECK PROCESS gamecreditsd MATCHING "gamecreditsd"
  if not exist then alert
CHECK PROCESS REVS MATCHING "-ac_name=REVS"
  if not exist then alert
CHECK PROCESS SUPERNET MATCHING "-ac_name=SUPERNET"
 if not exist then alert
CHECK PROCESS DEX MATCHING "-ac_name=DEX"
  if not exist then alert
CHECK PROCESS PANGEA MATCHING "-ac_name=PANGEA"
  if not exist then alert
CHECK PROCESS BET MATCHING "-ac_name=BET"
  if not exist then alert
CHECK PROCESS JUMBLR MATCHING "-ac_name=JUMBLR"
  if not exist then alert
CHECK PROCESS CRYPTO MATCHING "-ac_name=CRYPTO"
  if not exist then alert
CHECK PROCESS HODL MATCHING "-ac_name=HODL"
  if not exist then alert
CHECK PROCESS MSHARK MATCHING "-ac_name=MSHARK"
  if not exist then alert
CHECK PROCESS BOTS MATCHING "-ac_name=BOTS"
  if not exist then alert
CHECK PROCESS MGW MATCHING "-ac_name=MGW"
  if not exist then alert
CHECK PROCESS COQUI MATCHING "-ac_name=COQUI"
  if not exist then alert
CHECK PROCESS WLC MATCHING "-ac_name=WLC"
  if not exist then alert
CHECK PROCESS KV MATCHING "-ac_name=KV"
 if not exist for 3 cycles then restart
  if not exist then alert
CHECK PROCESS CEAL MATCHING "-ac_name=CEAL"
  if not exist then alert
CHECK PROCESS MESH MATCHING "-ac_name=MESH"
  if not exist then alert
CHECK PROCESS MNZ MATCHING "-ac_name=MNZ"
  if not exist then alert
CHECK PROCESS AXO MATCHING "-ac_name=AXO"
  if not exist then alert
CHECK PROCESS ETOMIC MATCHING "-ac_name=ETOMIC"
  if not exist then alert
CHECK PROCESS BTCH MATCHING "-ac_name=BTCH"
  if not exist then alert
CHECK PROCESS PIZZA MATCHING "-ac_name=PIZZA"
  if not exist then alert
  if 3 restarts within 3 cycles then timeout
CHECK PROCESS BEER MATCHING "-ac_name=BEER"
  if not exist then alert
CHECK PROCESS NINJA MATCHING "-ac_name=NINJA"
  if not exist then alert
CHECK PROCESS OOT MATCHING "-ac_name=OOT"
  if not exist then alert
CHECK PROCESS BNTN MATCHING "-ac_name=BNTN"
  if not exist then alert
CHECK PROCESS CHAIN MATCHING "-ac_name=CHAIN"
  if not exist then alert
CHECK PROCESS PRLPAY MATCHING "-ac_name=PRLPAY"
  if not exist then alert
CHECK PROCESS DSEC MATCHING "-ac_name=DSEC"
  if not exist then alert
CHECK PROCESS GLXT MATCHING "-ac_name=GLXT"
  if not exist then alert
CHECK PROCESS EQL MATCHING "-ac_name=EQL"
  if not exist then alert
CHECK PROCESS ZILLA MATCHING "-ac_name=ZILLA"
  if not exist then alert
  if 3 restarts within 3 cycles then timeout
CHECK PROCESS RFOX MATCHING "-ac_name=RFOX"
  if not exist then alert
CHECK PROCESS SEC MATCHING "-ac_name=SEC"
  if not exist then alert
CHECK PROCESS CCL MATCHING "-ac_name=CCL"
  if not exist then alert
CHECK PROCESS PIRATE MATCHING "-ac_name=PIRATE"
  if not exist then alert
CHECK PROCESS MGNX MATCHING "-ac_name=MGNX"
  if not exist then alert
CHECK PROCESS PGT MATCHING "-ac_name=PGT"
  if not exist then alert
CHECK PROCESS KMDICE MATCHING "-ac_name=KMDICE"
  if not exist then alert
CHECK PROCESS DION MATCHING "-ac_name=DION"
  if not exist then alert
CHECK PROCESS KSB MATCHING "-ac_name=KSB"
  if not exist then alert
CHECK PROCESS OUR MATCHING "-ac_name=OUR"
  if not exist then alert
CHECK PROCESS ILN MATCHING "-ac_name=ILN"
  if not exist then alert
CHECK PROCESS iguana MATCHING "iguana notary_nosplit"
 if not exist then alert

check file database with path /home/eclips/.komodo/wallet.dat
  if timestamp > 15 minutes then alert
  if size > 30 MB then alert

check network public with interface eth0
  if failed link then alert
  if changed link then alert
  if saturation > 90% then alert
  if download > 10 MB/s then alert
  if total upload > 1 GB in last hour then alert
